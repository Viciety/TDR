<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #TaulellEscacs{border-collapse: collapse; margin: 0 auto; border:none;}
        td{width: 60px; height: 60px; border:none;}
        .black{background-color: #73934F;}
        .white{background-color: #EFE9D5;}
    </style>
    <title>Taulell d'Escacs</title>
</head>
<body>
    <script>
        
    </script><table id="TaulellEscacs">
    <tbody>
        <script type="text/javascript" src="TaulellOrdinador.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/RandomChooser.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/ScoreChooser.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/ComposedScorer.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/DeepScorer.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveFinder.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Cavall.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Peó.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Rei.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/StupidFitxa.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Torre.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Alfil.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Reina.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MatchFinalDetector.js"></script>
        <script type="text/javascript" src="DibuixarTaulell.js"></script>
        <script type="text/javascript" src="Funcionalities.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/MoveScorer/Scorer.js"></script>
        <script type="text/javascript">

            let scorers = new Array (new Array (new MaterialAdvantatgeScorer(), 10), new Array (new CheckmateScorer(), 10000))
            let score = new ComposedScorer(scorers)
            let moveChooser = new ScoreMoveChooser(score);
            let inicial = new Taulell(true);

            DibuixarTaulell(inicial);
            
            
            let jugador = BLANC;
            let seguentTaulell= inicial;
            for (let moviments = 0; moviments<300; moviments++){
                let PossiblesMoviments = LlistarMoviments(seguentTaulell, jugador);
                let PossiblesMovimentsValids = PossiblesMoviments.filter((possibleTaulell) => !ScanCheck(possibleTaulell, jugador));
                seguentTaulell = moveChooser.chooseMove(PossiblesMovimentsValids, jugador);
                if (seguentTaulell == undefined){
                    throw "seguentTaulell is undefined a l'HTML. Iteració "+(moviments+1);
                }
                DibuixarTaulell(seguentTaulell);
                if (ScanCheckmate(seguentTaulell, !jugador)){
                    document.write("Ha guanyat el jugador "+jugador+"!");
                    break;
                }
                if (ScanStalemate(seguentTaulell, jugador)){
                    document.write("Taules per rei ofegat");
                    break;
                }
                jugador = (jugador == BLANC) ? NEGRE : BLANC;
            }

        </script>
    </tbody>
</table>
</body>
</html>