<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #TaulellEscacs{border-collapse: collapse; margin: 0 auto; border:none;}
        td{width: 60px; height: 60px; border:none;}
        .black{background-color: #73934F;}
        .white{background-color: #EFE9D5;}
    </style>
    <title>Taulell d'Escacs</title>
</head>
<body>
    <div id="TaulellEscacs"></div>
</body>
<script type="text/javascript" src="TaulellOrdinador.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/RandomChooser.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/ScoreChooser.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/ComposedScorer.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/DeepScorer.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveFinder.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Cavall.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/PeÃ³.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Rei.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/StupidFitxa.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Torre.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Alfil.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveKnower/Reina.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MatchFinalDetector.js"></script>
        <script type="text/javascript" src="ProgramaLogica/MoveChooser/MoveScorer/Scorer.js"></script>
        <script type="text/javascript" src="ProgramaLogica/PlayerManager/WorkerPlayerManager.js"></script>
        <script type="text/javascript" src="DibuixarTaulell.js"></script>
        <script type="text/javascript" src="Funcionalities.js"></script>
        <script type="text/javascript" src="ExemplesTaulells.js"></script>
        <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", function(event) {
            let scorers = new Array (new Array (new MaterialAdvantatgeScorer(), 10), new Array (new CheckmateScorer(), 10000))
            let score = new ComposedScorer(scorers);
            let depth = 2;
            let deepScorer = new DeepScorer(depth, score);
            let moveChooser = new ScoreMoveChooser(deepScorer);
            let inicial = TwoVSOnePawnAndKings;
    
            DibuixarTaulell(inicial);
            
            const NoHaAcabat = 0;
            const Victoria = 1;
            const Taules = 2;

            let jugador = BLANC;
            let moviments = 0;
            let maxMoviments = 60;
            let resultat = NoHaAcabat;
            let playerManagers = new Array();
            let currentPlayerManager = 0;
            let crida = function(seguentTaulell){
                DibuixarTaulell(seguentTaulell);
                if (ScanCheckmate(seguentTaulell, !jugador)){
                    resultat = Victoria;
                }
                if (ScanStalemate(seguentTaulell, jugador)){
                    document.write("Taules per rei ofegat");
                    resultat = Taules;
                }
                if (ScanInsufficientMaterial(seguentTaulell)){
                    resultat = Taules;
                }
                moviments++;
                jugador = (jugador == BLANC) ? NEGRE : BLANC;
                if(resultat == NoHaAcabat && moviments<maxMoviments){
                    currentPlayerManager = (currentPlayerManager + 1) % 2
                    playerManagers[currentPlayerManager].manageTorn(seguentTaulell);
                }
            };
            playerManagers.push(new WorkerPlayerManager(crida,BLANC,MoveChooserBlanc));
            playerManagers.push(new WorkerPlayerManager(crida,NEGRE,MoveChooserNegre));

            playerManagers[currentPlayerManager].manageTorn(inicial);

        });
        </script>
</html>